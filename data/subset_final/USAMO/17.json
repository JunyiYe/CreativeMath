{
  "competition_id": "2012_USAMO_Problems",
  "problem_id": 4,
  "difficulty": 7,
  "problem": "Find all functions $f\u00a0: \\mathbb{Z}^+ \\to \\mathbb{Z}^+$ (where $\\mathbb{Z}^+$ is the set of positive integers) such that $f(n!) = f(n)!$ for all positive integers $n$ and such that $m - n$ divides $f(m) - f(n)$ for all distinct positive integers $m$, $n$.",
  "solutions": {
    "Solution": "By the first condition we have $f(1)=f(1!)=f(1)!$ and $f(2)=f(2!)=f(2)!$, so $f(1)=1$ or $2$ and similarly for $f(2)$.  By the second condition, we have\n\\[n\\cdot n!=(n+1)!-n! \\mid f(n+1)!-f(n)! \\qquad \\qquad (1)\\]\nfor all positive integers $n$.\nSuppose that for some $n \\geq 2$ we have $f(n) = 1$.  We claim that $f(k)=1$ for all $k\\ge n$. Indeed, from Equation (1) we have $f(n+1)!\\equiv 1 \\mod n\\cdot n!$, and this is only possible if $f(n+1)=1$; the claim follows by induction.\nWe now divide into cases:\n $f(1)=f(2)=1$\nThis gives $f(n)=1$ always from the previous claim, which is a solution. \n $f(1)=2, f(2)=1$\nThis implies $f(n)=1$ for all $n\\ge 2$, but this does not satisfy the initial conditions. Indeed, we would have\n\\[3-1 \\mid f(3)-f(1)\\]\nand so $2\\mid -1$, a contradiction.\n $f(1)=1$, $f(2)=2$\nWe claim $f(n)=n$ always by induction. The base cases are $n = 1$ and $n = 2$. Fix $k > 1$ and suppose that $f(k)=k$.  By Equation (1) we have that\n\\[f(k+1)! \\equiv k! \\mod k\\cdot k! .\\]\nThis implies $f(k+1)<2k$ (otherwise $f(k+1)!\\equiv 0 \\mod k\\cdot k!$). Also we have\n\\[(k+1)-1  \\mid  f(k+1)-f(1)\\]\nso $f(k+1)\\equiv 1 \\mod k$. This gives the solutions $f(k+1)=1$ and $f(k+1)=k+1$. The first case is obviously impossible, so $f(k + 1) = k + 1$, as desired.  By induction, $f(n) = n$ for all $n$.  This also satisfies the requirements.\n $f(1)=f(2)=2$\nWe claim $f(n)=2$ by a similar induction. Again if $f(k)=2$, then by (1) we have\n\\[f(k+1)\\equiv 2 \\mod k\\cdot k!\\]\nand so $f(k+1)<2k$.  Also note that\n\\[k+1-1  \\mid  f(k+1)-2\\]\nand\n\\[k+1-2  \\mid  f(k+1)-2\\]\nso $f(k+1)\\equiv 2 \\mod k(k-1)$. Then the only possible solution is $f(k+1)=2$. By induction, $f(n) = 2$ for all $n$, and this satisfies all requirements.\n\nIn summary, there are three solutions: $\\boxed{f(n)=1, f(n)=2, f(n)=n}$."
  }
}