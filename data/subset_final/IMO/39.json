{
  "competition_id": "2008_IMO_Problems",
  "problem_id": 5,
  "difficulty": 8,
  "problem": "Let $n$ and $k$ be positive integers with $k \\geq n$ and $k - n$ an even number. Let $2n$ lamps labelled $1$, $2$, ..., $2n$ be given, each of which can be either  or . Initially all the lamps are off. We consider sequences of steps: at each step one of the lamps is switched (from on to off or from off to on).\nLet $N$ be the number of such sequences consisting of $k$ steps and resulting in the state where lamps $1$ through $n$ are all on, and lamps $n + 1$ through $2n$ are all off.\nLet $M$ be number of such sequences consisting of $k$ steps, resulting in the state where lamps $1$ through $n$ are all on, and lamps $n + 1$ through $2n$ are all off, but where none of the lamps $n + 1$ through $2n$ is ever switched on.\nDetermine $\\frac {N}{M}$.",
  "solutions": {
    "Solution": "For convenience, let $A$ denote the set $(1,2,\\ldots n)$ and $B$ the set $(n+1,n+2,\\ldots,2n)$.\nWe can describe each sequences of switching the lamps as a $k$-dimensional vector\n$(a_1, a_2, \\ldots, a_k)$, where $a_i \\in A \\cup B$ signifies which lamp was switched on the $i$-th move for $i=1,2,\\ldots k$. \nLet $\\cal{N}$ consist of those sequences that contain each of the numbers in $A$ an  number of times and each of the numbers in $B$ an  number of times. Similarly, let $\\cal{M}$ denote the set of those sequences that contain no numbers from $B$ and each of the numbers in $A$ an odd number of times. By definition, $M=|\\cal{M}|$ and $N=|\\cal{N}|$.\nDefine the mapping $f:\\cal{N} \\rightarrow \\cal{M}$ as\n\\[f(a_1, a_2, \\ldots, a_k) = (b_1,b_2,\\ldots b_k)\u00a0:  b_i =  \\begin{cases}    a_i, & \\mbox{ if }  a_i \\in A \\\\    a_i-n, & \\mbox{ if } a_i  \\in B \\end{cases}\\]\nWhat we want to show now is that each element of $\\cal{M}$ is an image of exactly $2^{k-n}$ elements from $\\cal{N}$, which would imply $N = 2^{k-n}M$ and solve the problem.\nConsider an arbitrary element $y$ of $\\cal{M}$ and let $l_i$ be the number of appearances of the number $i$ in $y$ for $i=1,2,\\ldots n$. Now consider the set of pre-images of $y$, that is $X_y = \\{ x | f(x) = y \\}$.\nIt is easy to see that each element $x\\in X_y$ is derived from $y$ by  an  number of its $1$-s, $2$-s, and so on, where flipping means changing the number $j\\in A$ to $j+n\\in B$. Since each such set of flippings results in a unique $x$, all we want to count is the number of flippings. We can flip exactly $0, 2, 4,\\ldots$ of the $1$-s, so that results in\n\\[\\binom{l_1}{0} + \\binom{l_1}{2}+\\binom{l_1}{4}+\\cdots = 2^{l_1-1}\\]\nflippings. Combine each of them with the $2^{l_2-1}$, $2^{l_3-1}$, etc. ways of flipping the $2$-s, $3$-s etc. respectively to get the total number of flippings:\n\\[2^{l_1-1}2^{l_2-1}\\cdots2^{l_n-1} = 2^{l_1+l_2+\\cdots+l_n-n} = 2^{k-n}.\\] \nThis shows that $|X_y| = 2^{k-n}$ and the proof is complete."
  }
}