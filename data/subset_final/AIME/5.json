{
  "competition_id": "2013_AIME_II_Problems",
  "problem_id": 11,
  "difficulty": 5,
  "problem": "Let $A = \\{1, 2, 3, 4, 5, 6, 7\\}$, and let $N$ be the number of functions $f$ from set $A$ to set $A$ such that $f(f(x))$ is a constant function. Find the remainder when $N$ is divided by $1000$.",
  "solutions": {
    "Solution 1": "Any such function can be constructed by distributing the elements of $A$ on three tiers.\nThe bottom tier contains the constant value, $c=f(f(x))$ for any $x$. (Obviously $f(c)=c$.)\nThe middle tier contains $k$ elements $x\\ne c$ such that $f(x)=c$, where $1\\le k\\le 6$.\nThe top tier contains $6-k$ elements such that $f(x)$ equals an element on the middle tier.\nThere are $7$ choices for $c$. Then for a given $k$, there are $\\tbinom6k$ ways to choose the elements on the middle tier, and then $k^{6-k}$ ways to draw arrows down from elements on the top tier to elements on the middle tier.\nThus $N=7\\cdot\\sum_{k=1}^6\\tbinom6k\\cdot k^{6-k}=7399$, giving the answer $\\boxed{399}$.",
    "Solution 1 Clarified": "Define the three layers as domain $x$, codomain $f(x)$, and codomain $f(f(x))$. Each one of them is contained in the set $A$. We know that $f(f(x))$ is a constant function, or in other words, can only take on one value. So, we can start off by choosing that value $c$ in $7$ ways. So now, we choose the values that can be $f(x)$ for all those values should satisfy $f(f(x))=c$. Let's $S$ be that set of values. First things first, we must have $c$ to be part of $S$, for the $S$ is part of the domain of $x$. Since the values in $i\\in S$ all satisfy $f(i) = c$, we have $c$ to be a value that $f(x)$ can be. Now, for the elements other than $5$:\nIf we have $k$ elements other than $5$ that can be part of $S$, we will have $\\binom{6}{k}$ ways to choose those values. There will also be $k$ ways for each of the elements in $A$ other than $c$ and those in set $S$ (for when function $f$ is applied on those values, we already know it would be $c$). There are $6-k$ elements in $A$ other than $c$ and those in set $S$. Thus, there should be $6^{6-k}$ ways to match the domain $x$ to the values of $f(x)$. Summing up all possible values of $k$ ($[1,6]$), we have\n\\[\\sum_{k=1}^6 k^{6-k} = 6\\cdot 1 + 15\\cdot 16 + 20\\cdot 27 + 15\\cdot 16 + 6\\cdot 5 + 1) = 1057\\]\nMultiplying that by the original $7$ for the choice of $c$, we have $7 \\cdot 1057 = 7\\boxed{399}.$"
  }
}